================================================================================
ì—¬í–‰ ê¸°ë¡(Travel Log) ê¸°ëŠ¥ êµ¬í˜„ ë‚´ì—­
================================================================================
ì‘ì„±ì¼: 2025-12-23
í”„ë¡œì íŠ¸: Travelog
================================================================================

[ëª©ì°¨]
1. êµ¬í˜„ ì™„ë£Œ ê¸°ëŠ¥
2. ë°±ì—”ë“œ ë³€ê²½ì‚¬í•­
3. í”„ë¡ íŠ¸ì—”ë“œ ë³€ê²½ì‚¬í•­
4. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë³€ê²½
5. ë‚¨ì€ ì‘ì—… ë° í…ŒìŠ¤íŠ¸ ì‚¬í•­
6. íŒŒì¼ ìœ„ì¹˜ ì°¸ì¡°

================================================================================
1. êµ¬í˜„ ì™„ë£Œ ê¸°ëŠ¥
================================================================================

âœ… 1-1. ì—¬í–‰ ê¸°ë¡ ì‘ì„± ì‹œ ì—¬ëŸ¬ ì‚¬ì§„ ì—…ë¡œë“œ ê¸°ëŠ¥
   - ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë°©ì‹ ì§€ì›
   - ì—¬ëŸ¬ íŒŒì¼ ì„ íƒ ê°€ëŠ¥
   - ë¯¸ë¦¬ë³´ê¸° ì¸ë„¤ì¼ í‘œì‹œ
   - ê°œë³„ ì´ë¯¸ì§€ ì‚­ì œ ê¸°ëŠ¥

âœ… 1-2. MapViewì—ì„œ ì—¬í–‰ ê¸°ë¡ ì¢Œí‘œ í‘œì‹œ ë° ì‚¬ì§„ ë³´ì´ê¸°
   - My Mapì— ì—¬í–‰ ê¸°ë¡ ë§ˆì»¤ í‘œì‹œ
   - ë§ˆì»¤ í´ë¦­ ì‹œ ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ ëª¨ë‹¬ ì—´ê¸°
   - ë§ˆì»¤ ì •ë³´ì°½ì— ëŒ€í‘œ ì´ë¯¸ì§€ ì¸ë„¤ì¼ í‘œì‹œ

âœ… 1-3. Recent Travel Logs UI ê°œì„ 
   - ëŒ€í‘œ ì´ë¯¸ì§€ ì¸ë„¤ì¼ ì¹´ë“œ í˜•ì‹ìœ¼ë¡œ í‘œì‹œ
   - ì œëª©, ë‚ ì§œ, ì„¤ëª… í‘œì‹œ
   - ì‚¬ì§„ ê°œìˆ˜ í‘œì‹œ (+N more photos)
   - ìƒì„¸ë³´ê¸° ë²„íŠ¼ ì¶”ê°€

âœ… 1-4. ìƒì„¸ ì¼ì • ëª¨ë‹¬ ìƒì„±
   - TravelDetailModal ì»´í¬ë„ŒíŠ¸ ìƒì„±
   - ì—¬í–‰ ì •ë³´ í‘œì‹œ (ì œëª©, ë‚ ì§œ, í…Œë§ˆ, ì´ ë¹„ìš©)
   - ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ (í™”ì‚´í‘œ ë„¤ë¹„ê²Œì´ì…˜)
   - ìƒì„¸ ì¼ì • ëª©ë¡ ì¡°íšŒ
   - ìƒˆ ì¼ì • ì¶”ê°€ í¼ (ì¥ì†Œëª…, ì¢Œí‘œ, ì„¤ëª…, ì‚¬ì§„ ì—…ë¡œë“œ)

âœ… 1-5. í•œê¸€ ë¡œì»¬ë¼ì´ì œì´ì…˜
   - MapView.vue ì—¬í–‰ ê¸°ë¡ ì‘ì„± í¼ í•œê¸€í™”
   - TravelDetailModal.vue ì „ì²´ í•œê¸€í™”

âœ… 1-6. ì´ë¯¸ì§€ ê²½ë¡œ ì²˜ë¦¬ ê°œì„ 
   - getFullImageUrl() ìœ í‹¸ë¦¬í‹° ì ìš©
   - ìƒëŒ€ ê²½ë¡œë¥¼ ì ˆëŒ€ ê²½ë¡œë¡œ ë³€í™˜ (/images/abc.jpg â†’ http://localhost:8080/images/abc.jpg)

================================================================================
2. ë°±ì—”ë“œ ë³€ê²½ì‚¬í•­
================================================================================

[2-1] íŒŒì¼ ì—…ë¡œë“œ API ì¶”ê°€
--------------------------------------
ğŸ“ íŒŒì¼: travelog/src/main/java/.../service/FileService.java
ğŸ“Œ ìœ„ì¹˜: ê¸°ì¡´ uploadFile() ë©”ì„œë“œ ì•„ë˜

ğŸ”§ ì¶”ê°€ëœ ë©”ì„œë“œ:
public List<String> uploadMultipleFiles(List<MultipartFile> files) throws IOException {
    List<String> urls = new ArrayList<>();
    for (MultipartFile file : files) {
        if (!file.isEmpty()) {
            String url = uploadFile(file);
            if (url != null) {
                urls.add(url);
            }
        }
    }
    return urls;
}

--------------------------------------
ğŸ“ íŒŒì¼: travelog/src/main/java/.../controller/FileController.java
ğŸ“Œ ìœ„ì¹˜: ê¸°ì¡´ upload() ë©”ì„œë“œ ì•„ë˜

ğŸ”§ ì¶”ê°€ëœ ì—”ë“œí¬ì¸íŠ¸:
@PostMapping("/upload-multiple")
public ResponseEntity<?> uploadMultiple(@RequestParam("files") List<MultipartFile> files) {
    try {
        List<String> imageUrls = fileService.uploadMultipleFiles(files);
        Map<String, Object> response = new HashMap<>();
        response.put("urls", imageUrls);
        return new ResponseEntity<>(response, HttpStatus.OK);
    } catch (Exception e) {
        log.error("íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨", e);
        return new ResponseEntity<>("ì—…ë¡œë“œ ì‹¤íŒ¨", HttpStatus.INTERNAL_SERVER_ERROR);
    }
}

ğŸ“¡ API: POST /api/files/upload-multiple
ğŸ“¤ Request: FormData with 'files' field (multiple files)
ğŸ“¥ Response: { "urls": ["url1", "url2", ...] }


[2-2] DTO í•„ë“œ ì¶”ê°€
--------------------------------------
ğŸ“ íŒŒì¼: travelog/src/main/java/.../model/dto/TravelRecordDto.java

ğŸ”§ ì¶”ê°€ëœ í•„ë“œ:
private List<String> imageUrls;

--------------------------------------
ğŸ“ íŒŒì¼: travelog/src/main/java/.../model/dto/TravelDetailDto.java

ğŸ”§ ì¶”ê°€ëœ í•„ë“œ:
private String locationName;
private String description;
private List<String> imageUrls;


[2-3] MyBatis TypeHandler ì¶”ê°€
--------------------------------------
ğŸ“ íŒŒì¼: travelog/src/main/java/.../config/JsonListTypeHandler.java (ì‹ ê·œ ìƒì„±)

ğŸ”§ ê¸°ëŠ¥:
- List<String> â†” JSON ë¬¸ìì—´ ë³€í™˜
- Jackson ObjectMapper ì‚¬ìš©
- ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì‹œ: List<String> â†’ JSON TEXT
- ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒ ì‹œ: JSON TEXT â†’ List<String>

ğŸ”§ ì½”ë“œ:
@MappedTypes(List.class)
public class JsonListTypeHandler extends BaseTypeHandler<List<String>> {
    private static final ObjectMapper objectMapper = new ObjectMapper();

    @Override
    public void setNonNullParameter(PreparedStatement ps, int i, List<String> parameter, JdbcType jdbcType) throws SQLException {
        try {
            ps.setString(i, objectMapper.writeValueAsString(parameter));
        } catch (JsonProcessingException e) {
            throw new SQLException("JSON ë³€í™˜ ì˜¤ë¥˜", e);
        }
    }

    @Override
    public List<String> getNullableResult(ResultSet rs, String columnName) throws SQLException {
        return parseJson(rs.getString(columnName));
    }

    @Override
    public List<String> getNullableResult(ResultSet rs, int columnIndex) throws SQLException {
        return parseJson(rs.getString(columnIndex));
    }

    @Override
    public List<String> getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {
        return parseJson(cs.getString(columnIndex));
    }

    private List<String> parseJson(String json) throws SQLException {
        if (json == null || json.trim().isEmpty()) {
            return new ArrayList<>();
        }
        try {
            return objectMapper.readValue(json, new TypeReference<List<String>>() {});
        } catch (JsonProcessingException e) {
            throw new SQLException("JSON íŒŒì‹± ì˜¤ë¥˜", e);
        }
    }
}


[2-4] MyBatis Mapper XML ìˆ˜ì •
--------------------------------------
ğŸ“ íŒŒì¼: travelog/src/main/resources/mappers/TravelRecordMapper.xml

ğŸ”§ INSERT ì¿¼ë¦¬ ìˆ˜ì •:
- image_urls ì»¬ëŸ¼ ì¶”ê°€
- TypeHandler ì ìš©: #{imageUrls, typeHandler=com.ssafy.travelog.config.JsonListTypeHandler}

ğŸ”§ SELECT ì¿¼ë¦¬ ìˆ˜ì •:
- image_urls AS imageUrls ì¶”ê°€

--------------------------------------
ğŸ“ íŒŒì¼: travelog/src/main/resources/mappers/TravelDetailMapper.xml

ğŸ”§ INSERT ì¿¼ë¦¬ ìˆ˜ì •:
- location_name ì»¬ëŸ¼ ì¶”ê°€: #{locationName}
- description ì»¬ëŸ¼ ì¶”ê°€: #{description}
- image_urls ì»¬ëŸ¼ ì¶”ê°€: #{imageUrls, typeHandler=...}

ğŸ”§ SELECT ì¿¼ë¦¬ ìˆ˜ì •:
- location_name AS locationName ì¶”ê°€
- description ì¶”ê°€
- image_urls AS imageUrls ì¶”ê°€


[2-5] ì»¨íŠ¸ë¡¤ëŸ¬ ìˆ˜ì •
--------------------------------------
ğŸ“ íŒŒì¼: travelog/src/main/java/.../controller/TravelRecordController.java

ğŸ”§ ìˆ˜ì • ì‚¬í•­:
1. ê¸°ì¡´ POST /{recordId}/details ì—”ë“œí¬ì¸íŠ¸:
   - List<TravelDetailDto> â†’ TravelDetailDto (ë‹¨ì¼ ê°ì²´)ë¡œ ë³€ê²½
   - ë‹¨ì¼ ê°ì²´ë¥¼ List.of(detail)ë¡œ ë³€í™˜í•˜ì—¬ ì„œë¹„ìŠ¤ í˜¸ì¶œ

2. ë°°ì¹˜ ì—”ë“œí¬ì¸íŠ¸ ë¶„ë¦¬:
   - POST /{recordId}/details/batch
   - ì—¬ëŸ¬ ê°œì˜ ì¼ì •ì„ í•œ ë²ˆì— ì¶”ê°€í•  ë•Œ ì‚¬ìš©

ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸:
- POST /api/travels/{recordId}/details (ë‹¨ì¼ ì¼ì • ì¶”ê°€)
- POST /api/travels/{recordId}/details/batch (ì—¬ëŸ¬ ì¼ì • ì¶”ê°€)

================================================================================
3. í”„ë¡ íŠ¸ì—”ë“œ ë³€ê²½ì‚¬í•­
================================================================================

[3-1] API í•¨ìˆ˜ ì¶”ê°€
--------------------------------------
ğŸ“ íŒŒì¼: front/src/api/api.js

ğŸ”§ ì¶”ê°€ëœ API:
export const fileAPI = {
  // ê¸°ì¡´: uploadImage (ë‹¨ì¼ íŒŒì¼)

  // ì‹ ê·œ: uploadMultipleImages
  uploadMultipleImages: async (files) => {
    const formData = new FormData()
    files.forEach((file) => {
      formData.append('files', file)
    })
    const response = await axios.post(`${API_BASE_URL}/files/upload-multiple`, formData, {
      headers: { 'Content-Type': 'multipart/form-data' }
    })
    return response.data
  }
}


[3-2] MapView.vue ìˆ˜ì •
--------------------------------------
ğŸ“ íŒŒì¼: front/src/views/MapView.vue

ğŸ”§ ì¶”ê°€ëœ ìƒíƒœ ë³€ìˆ˜:
const selectedFiles = ref([])      // ì„ íƒëœ íŒŒì¼ë“¤
const previewUrls = ref([])        // ë¯¸ë¦¬ë³´ê¸° URLë“¤
const fileInput = ref(null)        // íŒŒì¼ input ì°¸ì¡°
const selectedTravelId = ref(null) // ì„ íƒëœ ì—¬í–‰ ID
const showTravelDetailModal = ref(false) // ëª¨ë‹¬ í‘œì‹œ ì—¬ë¶€

ğŸ”§ ì¶”ê°€ëœ í•¨ìˆ˜:
1. triggerFileInput() - íŒŒì¼ ì„ íƒ ì°½ ì—´ê¸°
2. handleFileSelect(event) - íŒŒì¼ ì„ íƒ ì²˜ë¦¬
3. handleFileDrop(event) - ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì²˜ë¦¬
4. addFiles(files) - íŒŒì¼ ì¶”ê°€ ë° ë¯¸ë¦¬ë³´ê¸° ìƒì„±
5. removeImage(index) - ì„ íƒëœ ì´ë¯¸ì§€ ì œê±°
6. openTravelDetail(log) - ìƒì„¸ ëª¨ë‹¬ ì—´ê¸°

ğŸ”§ ìˆ˜ì •ëœ í•¨ìˆ˜:
handleCreateTravel() {
  // 1. ì„ íƒëœ ì´ë¯¸ì§€ ì—…ë¡œë“œ
  if (selectedFiles.value.length > 0) {
    const uploadResult = await fileAPI.uploadMultipleImages(selectedFiles.value)
    imageUrls = uploadResult.urls || uploadResult.data?.urls || []
  }

  // 2. ì—¬í–‰ ê¸°ë¡ ìƒì„±
  const travelData = {
    ...travelForm.value,
    imageUrls: imageUrls
  }
  await travelAPI.createTravel(travelData)

  // 3. í¼ ì´ˆê¸°í™”
  selectedFiles.value = []
  previewUrls.value = []
}

ğŸ”§ UI ë³€ê²½ì‚¬í•­:
1. ì—¬í–‰ ê¸°ë¡ ì‘ì„± í¼ í•œê¸€í™”:
   - "ì œëª©", "ì‹œì‘ì¼", "ì¢…ë£Œì¼", "ì´ ë¹„ìš©", "í…Œë§ˆ"

2. ì‚¬ì§„ ì—…ë¡œë“œ ì˜ì—­ ì¶”ê°€:
   - ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì˜ì—­
   - ë¯¸ë¦¬ë³´ê¸° ê·¸ë¦¬ë“œ (4ì—´)
   - ì‚­ì œ ë²„íŠ¼ (X)

3. Recent Travel Logs ì¹´ë“œ ê°œì„ :
   - ëŒ€í‘œ ì´ë¯¸ì§€ ì¸ë„¤ì¼ (w-full h-48)
   - ì œëª©, ë‚ ì§œ, ì„¤ëª… í‘œì‹œ
   - ì‚¬ì§„ ê°œìˆ˜ í‘œì‹œ
   - "ìƒì„¸ë³´ê¸° â†’" ë²„íŠ¼

4. ì´ë¯¸ì§€ ê²½ë¡œ ì²˜ë¦¬:
   - getFullImageUrl() ì ìš©
   - Recent Travel Logs ì¸ë„¤ì¼
   - ë§ˆì»¤ ì •ë³´ì°½ ì´ë¯¸ì§€
   - ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ ëª¨ë‹¬

ğŸ”§ import ì¶”ê°€:
import TravelDetailModal from '@/components/TravelDetailModal.vue'
import { getFullImageUrl } from "@/utils/imageUtils"


[3-3] TravelDetailModal.vue ìƒì„±
--------------------------------------
ğŸ“ íŒŒì¼: front/src/components/TravelDetailModal.vue (ì‹ ê·œ ìƒì„±)

ğŸ”§ Props:
- isOpen: Boolean (ëª¨ë‹¬ í‘œì‹œ ì—¬ë¶€)
- travelId: Number/String (ì—¬í–‰ ID)
- travel: Object (ì—¬í–‰ ì •ë³´)
- onClose: Function (ë‹«ê¸° ì½œë°±)

ğŸ”§ ì£¼ìš” ê¸°ëŠ¥:
1. ì—¬í–‰ ì •ë³´ í‘œì‹œ
   - ì œëª©, ê¸°ê°„, í…Œë§ˆ, ì´ ë¹„ìš©

2. ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬
   - ë©”ì¸ ì´ë¯¸ì§€ (í° í™”ë©´)
   - ì¸ë„¤ì¼ ë„¤ë¹„ê²Œì´ì…˜
   - ì´ì „/ë‹¤ìŒ í™”ì‚´í‘œ

3. ìƒì„¸ ì¼ì • ëª©ë¡
   - ì¥ì†Œëª…, ì„¤ëª…, ì‚¬ì§„ í‘œì‹œ
   - ìˆœì„œëŒ€ë¡œ ì •ë ¬

4. ì¼ì • ì¶”ê°€ í¼
   - ì¥ì†Œëª… (í•„ìˆ˜)
   - ìœ„ë„/ê²½ë„ (ì„ íƒ)
   - ì„¤ëª… (ì„ íƒ)
   - ì‚¬ì§„ ì—…ë¡œë“œ (ì—¬ëŸ¬ ì¥)

ğŸ”§ ìƒíƒœ ë³€ìˆ˜:
const travelDetails = ref([])           // ì¼ì • ëª©ë¡
const showAddDetailForm = ref(false)    // ì¶”ê°€ í¼ í‘œì‹œ
const currentImageIndex = ref(0)        // í˜„ì¬ ì´ë¯¸ì§€ ì¸ë±ìŠ¤
const detailForm = ref({                // ì¼ì • ì¶”ê°€ í¼ ë°ì´í„°
  locationName: '',
  latitude: null,
  longitude: null,
  description: '',
})
const detailImages = ref([])            // ì¼ì • ì‚¬ì§„ë“¤
const detailPreviewUrls = ref([])       // ë¯¸ë¦¬ë³´ê¸° URLs

ğŸ”§ ì£¼ìš” í•¨ìˆ˜:
1. fetchTravelDetails() - ì¼ì • ëª©ë¡ ì¡°íšŒ
2. handleAddDetail() - ìƒˆ ì¼ì • ì¶”ê°€
3. handleDetailImagesSelect() - ì¼ì • ì‚¬ì§„ ì„ íƒ
4. nextImage() / prevImage() - ì´ë¯¸ì§€ ë„¤ë¹„ê²Œì´ì…˜
5. removeDetailImage(index) - ì¼ì • ì‚¬ì§„ ì œê±°

ğŸ”§ í•œê¸€í™”:
- ëª¨ë“  ë ˆì´ë¸” ë° placeholder í•œê¸€ ì ìš©
- "ì—¬í–‰ ì •ë³´", "ìƒì„¸ ì¼ì •", "ì¼ì • ì¶”ê°€" ë“±

ğŸ”§ ì´ë¯¸ì§€ ê²½ë¡œ ì²˜ë¦¬:
- ëª¨ë“  ì´ë¯¸ì§€ì— getFullImageUrl() ì ìš©

================================================================================
4. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë³€ê²½
================================================================================

ğŸ“ íŒŒì¼: travelog/schema-update.sql (ì‹ ê·œ ìƒì„±)

ğŸ”§ ì‹¤í–‰í•  SQL:

-- Travel_Records í…Œì´ë¸”ì— image_urls ì»¬ëŸ¼ ì¶”ê°€
ALTER TABLE Travel_Records
ADD COLUMN image_urls TEXT NULL COMMENT 'ì—¬í–‰ ê¸°ë¡ ì´ë¯¸ì§€ URLs (JSON ë°°ì—´)';

-- Travel_Details í…Œì´ë¸”ì— ì»¬ëŸ¼ ì¶”ê°€
ALTER TABLE Travel_Details
ADD COLUMN location_name VARCHAR(255) NULL COMMENT 'ì¥ì†Œëª…',
ADD COLUMN description TEXT NULL COMMENT 'ë©”ëª¨/ì„¤ëª…',
ADD COLUMN image_urls TEXT NULL COMMENT 'ì¼ì • ì´ë¯¸ì§€ URLs (JSON ë°°ì—´)';

ğŸ“Œ ë°ì´í„° ì €ì¥ í˜•ì‹:
- image_urls ì»¬ëŸ¼: JSON TEXT í˜•ì‹
- ì˜ˆì‹œ: ["url1", "url2", "url3"]
- TypeHandlerê°€ ìë™ìœ¼ë¡œ List<String> â†” JSON ë³€í™˜

ğŸ“Œ ì‹¤í–‰ ë°©ë²•:
cd C:\Users\SSAFY\Documents\GitHub\Travelog\travelog
mysql -u ssafy -p travelog < schema-update.sql

================================================================================
5. ë‚¨ì€ ì‘ì—… ë° í…ŒìŠ¤íŠ¸ ì‚¬í•­
================================================================================

[5-1] í•„ìˆ˜ ì‘ì—…
--------------------------------------
âš ï¸ 1. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸
   - schema-update.sql íŒŒì¼ ì‹¤í–‰
   - ì»¬ëŸ¼ ì¶”ê°€ í™•ì¸

âš ï¸ 2. ì´ë¯¸ì§€ ì €ì¥ ë””ë ‰í† ë¦¬ í™•ì¸
   - C:/travelog-images/ ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
   - ì—†ìœ¼ë©´ ìƒì„±: mkdir C:/travelog-images

âš ï¸ 3. ë°±ì—”ë“œ ì„œë²„ ì¬ì‹œì‘
   - JsonListTypeHandler í´ë˜ìŠ¤ ë¡œë“œ
   - ìƒˆë¡œìš´ API ì—”ë“œí¬ì¸íŠ¸ í™œì„±í™”


[5-2] í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸
--------------------------------------
â–¡ ì—¬í–‰ ê¸°ë¡ ì‘ì„±
  â–¡ ì—¬ëŸ¬ ì‚¬ì§„ ì„ íƒ ê°€ëŠ¥
  â–¡ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë™ì‘
  â–¡ ë¯¸ë¦¬ë³´ê¸° ì¸ë„¤ì¼ í‘œì‹œ
  â–¡ ê°œë³„ ì´ë¯¸ì§€ ì‚­ì œ
  â–¡ ì‚¬ì§„ê³¼ í•¨ê»˜ ì—¬í–‰ ê¸°ë¡ ì €ì¥

â–¡ Recent Travel Logs
  â–¡ ëŒ€í‘œ ì´ë¯¸ì§€ ì¸ë„¤ì¼ í‘œì‹œ
  â–¡ ì œëª©, ë‚ ì§œ, ì„¤ëª… í‘œì‹œ
  â–¡ ì‚¬ì§„ ê°œìˆ˜ í‘œì‹œ
  â–¡ ìƒì„¸ë³´ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ì—´ë¦¼

â–¡ MapView - My Map
  â–¡ ì—¬í–‰ ê¸°ë¡ ë§ˆì»¤ í‘œì‹œ
  â–¡ ë§ˆì»¤ ì •ë³´ì°½ì— ì¸ë„¤ì¼ í‘œì‹œ
  â–¡ ë§ˆì»¤ í´ë¦­ ì‹œ ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ ì—´ë¦¼
  â–¡ ì´ë¯¸ì§€ê°€ ì˜¬ë°”ë¥´ê²Œ ë¡œë“œë¨

â–¡ ìƒì„¸ ì¼ì • ëª¨ë‹¬
  â–¡ ì—¬í–‰ ì •ë³´ í‘œì‹œ
  â–¡ ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ ë™ì‘ (ì´ì „/ë‹¤ìŒ)
  â–¡ ì¸ë„¤ì¼ í´ë¦­ ì‹œ í•´ë‹¹ ì´ë¯¸ì§€ë¡œ ì´ë™
  â–¡ ì¼ì • ëª©ë¡ ì¡°íšŒ
  â–¡ ìƒˆ ì¼ì • ì¶”ê°€ í¼ ë™ì‘
  â–¡ ì¼ì •ì— ì—¬ëŸ¬ ì‚¬ì§„ ì—…ë¡œë“œ
  â–¡ ì¼ì • ì¶”ê°€ í›„ ëª©ë¡ ìë™ ê°±ì‹ 

â–¡ ì´ë¯¸ì§€ í‘œì‹œ
  â–¡ ëª¨ë“  ì´ë¯¸ì§€ê°€ http://localhost:8080/images/... í˜•ì‹ìœ¼ë¡œ ë¡œë“œ
  â–¡ 404 ì—ëŸ¬ê°€ ì—†ëŠ”ì§€ í™•ì¸


[5-3] ì—ëŸ¬ ì²˜ë¦¬ í™•ì¸
--------------------------------------
â–¡ íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
â–¡ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€
â–¡ ì´ë¯¸ì§€ê°€ ì—†ì„ ë•Œ placeholder í‘œì‹œ
â–¡ ë¹ˆ ì¼ì • ëª©ë¡ì¼ ë•Œ ì•ˆë‚´ ë©”ì‹œì§€


[5-4] ì„ íƒ ì‘ì—… (í–¥í›„ ê°œì„  ì‚¬í•­)
--------------------------------------
â—‹ ì´ë¯¸ì§€ í¬ê¸° ì œí•œ ë° ì••ì¶•
â—‹ ì—…ë¡œë“œ ì§„í–‰ë¥  í‘œì‹œ
â—‹ ì´ë¯¸ì§€ lazy loading
â—‹ ì¼ì • ìˆ˜ì •/ì‚­ì œ ê¸°ëŠ¥
â—‹ ì¼ì • ìˆœì„œ ë³€ê²½ (ë“œë˜ê·¸ ì•¤ ë“œë¡­)
â—‹ ì§€ë„ì—ì„œ ìœ„ì¹˜ ì„ íƒí•˜ì—¬ ì¢Œí‘œ ìë™ ì…ë ¥

================================================================================
6. íŒŒì¼ ìœ„ì¹˜ ì°¸ì¡°
================================================================================

[ë°±ì—”ë“œ íŒŒì¼]
--------------------------------------
ğŸ“‚ C:\Users\SSAFY\Documents\GitHub\Travelog\travelog\

src/main/java/com/ssafy/travelog/
  â”œâ”€â”€ controller/
  â”‚   â”œâ”€â”€ FileController.java                    (ìˆ˜ì •: ì—¬ëŸ¬ íŒŒì¼ ì—…ë¡œë“œ API ì¶”ê°€)
  â”‚   â””â”€â”€ TravelRecordController.java            (ìˆ˜ì •: ë‹¨ì¼ ì¼ì • ì¶”ê°€ API ë³€ê²½)
  â”‚
  â”œâ”€â”€ service/
  â”‚   â””â”€â”€ FileService.java                       (ìˆ˜ì •: uploadMultipleFiles ë©”ì„œë“œ ì¶”ê°€)
  â”‚
  â”œâ”€â”€ model/
  â”‚   â””â”€â”€ dto/
  â”‚       â”œâ”€â”€ TravelRecordDto.java               (ìˆ˜ì •: imageUrls í•„ë“œ ì¶”ê°€)
  â”‚       â””â”€â”€ TravelDetailDto.java               (ìˆ˜ì •: locationName, description, imageUrls ì¶”ê°€)
  â”‚
  â””â”€â”€ config/
      â””â”€â”€ JsonListTypeHandler.java               (ì‹ ê·œ: List<String> â†” JSON ë³€í™˜)

src/main/resources/
  â””â”€â”€ mappers/
      â”œâ”€â”€ TravelRecordMapper.xml                 (ìˆ˜ì •: image_urls ì»¬ëŸ¼ ì²˜ë¦¬)
      â””â”€â”€ TravelDetailMapper.xml                 (ìˆ˜ì •: location_name, description, image_urls ì²˜ë¦¬)

schema-update.sql                                (ì‹ ê·œ: ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸ SQL)


[í”„ë¡ íŠ¸ì—”ë“œ íŒŒì¼]
--------------------------------------
ğŸ“‚ C:\Users\SSAFY\Documents\GitHub\Travelog\front\

src/
  â”œâ”€â”€ api/
  â”‚   â””â”€â”€ api.js                                 (ìˆ˜ì •: uploadMultipleImages í•¨ìˆ˜ ì¶”ê°€)
  â”‚
  â”œâ”€â”€ views/
  â”‚   â””â”€â”€ MapView.vue                            (ëŒ€í­ ìˆ˜ì •: ì‚¬ì§„ ì—…ë¡œë“œ, UI ê°œì„ , ëª¨ë‹¬ í†µí•©)
  â”‚
  â”œâ”€â”€ components/
  â”‚   â””â”€â”€ TravelDetailModal.vue                  (ì‹ ê·œ: ìƒì„¸ ì¼ì • ëª¨ë‹¬)
  â”‚
  â””â”€â”€ utils/
      â””â”€â”€ imageUtils.js                          (ê¸°ì¡´: getFullImageUrl ì‚¬ìš©)

ì—¬í–‰_ê¸°ë¡_ê¸°ëŠ¥_êµ¬í˜„_ë‚´ì—­.txt                      (ë³¸ íŒŒì¼)


[ë°ì´í„°ë² ì´ìŠ¤]
--------------------------------------
ğŸ“Š í…Œì´ë¸”: Travel_Records
  - image_urls (TEXT): ì—¬í–‰ ê¸°ë¡ ì´ë¯¸ì§€ URLs (JSON ë°°ì—´)

ğŸ“Š í…Œì´ë¸”: Travel_Details
  - location_name (VARCHAR(255)): ì¥ì†Œëª…
  - description (TEXT): ë©”ëª¨/ì„¤ëª…
  - image_urls (TEXT): ì¼ì • ì´ë¯¸ì§€ URLs (JSON ë°°ì—´)

ğŸ“‚ ì´ë¯¸ì§€ ì €ì¥ ê²½ë¡œ:
  - C:/travelog-images/

ğŸ“¡ ì´ë¯¸ì§€ URL í˜•ì‹:
  - ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥: /images/{uuid}.{extension}
  - ì‹¤ì œ ì ‘ê·¼ URL: http://localhost:8080/images/{uuid}.{extension}

================================================================================
7. API ì—”ë“œí¬ì¸íŠ¸ ì •ë¦¬
================================================================================

[íŒŒì¼ ì—…ë¡œë“œ]
--------------------------------------
POST /api/files/upload-multiple
ğŸ“¤ Request:
  - Content-Type: multipart/form-data
  - Body: files (multiple files)

ğŸ“¥ Response:
{
  "urls": [
    "/images/abc123.jpg",
    "/images/def456.jpg"
  ]
}


[ì—¬í–‰ ê¸°ë¡ ì‘ì„±]
--------------------------------------
POST /api/travels
ğŸ“¤ Request:
{
  "title": "ì œì£¼ë„ ì—¬í–‰",
  "startDate": "2024-01-01",
  "endDate": "2024-01-03",
  "totalCost": 500000,
  "theme": "ë§›ì§‘ íˆ¬ì–´",
  "isPublic": true,
  "imageUrls": ["/images/abc123.jpg", "/images/def456.jpg"]
}

ğŸ“¥ Response:
"ì—¬í–‰ ê¸°ë¡ ì €ì¥ ì„±ê³µ"


[ì—¬í–‰ ê¸°ë¡ ì¡°íšŒ]
--------------------------------------
GET /api/travels
GET /api/travels/my

ğŸ“¥ Response:
[
  {
    "id": 1,
    "title": "ì œì£¼ë„ ì—¬í–‰",
    "startDate": "2024-01-01",
    "endDate": "2024-01-03",
    "totalCost": 500000,
    "theme": "ë§›ì§‘ íˆ¬ì–´",
    "isPublic": true,
    "imageUrls": ["/images/abc123.jpg", "/images/def456.jpg"],
    ...
  }
]


[ìƒì„¸ ì¼ì • ì¶”ê°€]
--------------------------------------
POST /api/travels/{recordId}/details
ğŸ“¤ Request:
{
  "locationName": "í•œë¼ì‚°",
  "latitude": 33.3617,
  "longitude": 126.5292,
  "description": "ì •ìƒê¹Œì§€ ë“±ë°˜ ì™„ë£Œ",
  "imageUrls": ["/images/mountain1.jpg", "/images/mountain2.jpg"]
}

ğŸ“¥ Response:
"ìƒì„¸ ì¼ì • ì €ì¥ ì„±ê³µ"


[ìƒì„¸ ì¼ì • ì¡°íšŒ]
--------------------------------------
GET /api/travels/{recordId}/details

ğŸ“¥ Response:
[
  {
    "id": 1,
    "travelRecordId": 1,
    "locationName": "í•œë¼ì‚°",
    "latitude": 33.3617,
    "longitude": 126.5292,
    "description": "ì •ìƒê¹Œì§€ ë“±ë°˜ ì™„ë£Œ",
    "imageUrls": ["/images/mountain1.jpg", "/images/mountain2.jpg"],
    "sequenceOrder": 1,
    ...
  }
]

================================================================================
8. ì£¼ìš” ê¸°ìˆ  ìŠ¤íƒ
================================================================================

[ë°±ì—”ë“œ]
- Java 17+
- Spring Boot 3.x
- MyBatis
- Jackson (JSON ì²˜ë¦¬)
- MySQL

[í”„ë¡ íŠ¸ì—”ë“œ]
- Vue 3 (Composition API)
- Vite
- Axios
- Pinia
- Tailwind CSS
- Kakao Maps API

[íŒŒì¼ ì €ì¥]
- ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œ (C:/travelog-images/)
- ë°ì´í„°ë² ì´ìŠ¤: URLë§Œ ì €ì¥ (JSON TEXT)

================================================================================
9. ë¬¸ì˜ ë° ì´ìŠˆ
================================================================================

ë¬¸ì œ ë°œìƒ ì‹œ í™•ì¸ ì‚¬í•­:
1. ë°±ì—”ë“œ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ê°€? (localhost:8080)
2. í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ê°€?
3. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸ê°€ ì™„ë£Œë˜ì—ˆëŠ”ê°€?
4. C:/travelog-images/ ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ëŠ”ê°€?
5. ë¸Œë¼ìš°ì € ì½˜ì†”ì— ì—ëŸ¬ê°€ ìˆëŠ”ê°€?
6. ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ API ìš”ì²­ì´ ì„±ê³µí•˜ëŠ”ê°€?

ë¡œê·¸ í™•ì¸:
- ë°±ì—”ë“œ: ì½˜ì†” ë¡œê·¸ (log.info, log.error)
- í”„ë¡ íŠ¸ì—”ë“œ: ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ Console íƒ­
- ì´ë¯¸ì§€ ë¡œë”©: Network íƒ­ì—ì„œ 404 ì—ëŸ¬ í™•ì¸

================================================================================
ì‘ì—… ì™„ë£Œì¼: 2025-12-23
ë‹¤ìŒ ì‘ì—…: schema-update.sql ì‹¤í–‰ í›„ í…ŒìŠ¤íŠ¸ ì§„í–‰
================================================================================
